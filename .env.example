# Copy this file to .env and adjust values as needed.
# This file contains safe defaults and examples - modify .env with your actual values.

# Container image versions
HAPROXY_IMAGE=haproxy:2.4
MARIADB_IMAGE=mariadb:10.11
PHPMYADMIN_IMAGE=phpmyadmin/phpmyadmin

# Galera cluster core settings
GALERA_CLUSTER_NAME=galera_cluster
# NOTE: Do NOT commit real production secrets to VCS. Rotate regularly.
# Generate your own secure password and replace this example (32+ characters recommended)
MYSQL_ROOT_PASSWORD=change_me_secure_password
MYSQL_DATABASE=testdb

# HAProxy health check MySQL user settings
# User used only for HAProxy "option mysql-check" (no privileges required)
HAPROXY_HEALTHCHECK_USER=haproxy_check
# Host restriction for health check user (avoid '%' wildcard for security)
# Options: container name (galera-haproxy), network subnet (172.%), or full network name
# If name resolution fails, try using network subnet pattern like '172.%'
HAPROXY_HEALTHCHECK_HOST=galera-haproxy

# Container and node names (for identification and networking)
NODE1_NAME=node1
NODE2_NAME=node2
NODE3_NAME=node3
NODE4_NAME=node4

# Host port mappings (host:container)
# Main services (always exposed)
HAPROXY_MYSQL_PORT=3306
HAPROXY_STATS_PORT=8080
PHPMYADMIN_HOST_PORT=90

# Individual node ports (optional - leave empty to disable direct access)
# Set to expose nodes directly (e.g., NODE1_HOST_PORT=3307)
# Only expose what you need for debugging or specialized applications
NODE1_HOST_PORT=
NODE2_HOST_PORT=
NODE3_HOST_PORT=
NODE4_HOST_PORT=

# phpMyAdmin configuration
PMA_ARBITRARY=1           # Allow arbitrary server connections (1=yes, 0=no)
UPLOAD_LIMIT=300M         # Maximum file upload size
PMA_HOST=haproxy          # Target MySQL server (connects via HAProxy)
PMA_PORT=3306             # Target MySQL port

# Resource limits (Docker Compose deploy constraints)
# These limits are used for documentation and in Docker Swarm mode
HAPROXY_CPUS=0.50         # HAProxy CPU limit (cores)
HAPROXY_MEMORY=512M       # HAProxy memory limit
NODE_CPUS=1.00            # Per-node CPU limit (cores)
NODE_MEMORY=1G            # Per-node memory limit
PHPMYADMIN_CPUS=0.50      # phpMyAdmin CPU limit (cores)
PHPMYADMIN_MEMORY=512M    # phpMyAdmin memory limit
